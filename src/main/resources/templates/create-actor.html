<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>Actor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f8f9fa;
        }
        label.error {
            color: red;
            padding: 2px 8px;
            margin-top: 2px;
	 }
    </style>
</head>
<body>

<section class="middle search">
    <div class="container" style="max-width: 1000px;">
        <h3>Add Actor Form</h3>

        <form th:action="@{/actor/save}" id="registrationForm" th:object="${actor}" method="post" autocomplete="off">
        <div class="row">
            <div class="form-group mb-2">
                <label class="control-label" for="userName">User Name</label>
                <input type="text" class="form-control" id="userName" th:field="*{userName}" placeholder="Enter username">
            </div>

            <div class="form-group mb-2">
                <label class="control-label">Gender</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" th:field="*{gender}" name="gender" value="Male">
                    <label class="form-check-label" >Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" th:field="*{gender}" name="gender" id="genderFemale" value="Female">
                    <label class="form-check-label" >Female</label>
                </div>
                <div id="genderError" class="gender-error"></div>
            </div>

            <div class="form-group mb-2">
                <label class="control-label" for="dateOfBirth">Date of Birth</label>
                <input type="date" class="form-control" id="dateOfBirth" th:field="*{dateOfBirth}" autocomplete="off">
            </div>

            <div class="form-group mb-2">
                <label class="control-label" for="phoneNumber">Phone Number</label>
                <input type="tel" class="form-control" id="phoneNumber" th:field="*{phoneNumber}">
            </div>

            <div class="form-group mb-2">
                <label class="control-label" for="biography">biography</label>
                <textarea class="form-control" id="biography" th:field="*{biography}" rows="3"></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
        </div>

        <div class="form-group">
            <span style="color: red;" th:text="${error}"></span>
        </div>

        </form>

    </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js"></script>

<script>
    $.validator.addMethod("minAge", function(value, element, min) {
    var today = new Date();
    var birthDate = new Date(value);
    var age = today.getFullYear() - birthDate.getFullYear();

    if (age > min+1) {
        return true;
    }

    var m = today.getMonth() - birthDate.getMonth();

    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }

    return age >= min;
},);

$.validator.addMethod(
"regex",
function(value, element, regexp) {
    var check = false;
    var re = new RegExp(regexp);
    return this.optional(element) || re.test(value);
},
"No special Characters allowed here"
);

$(document).ready(function() {
$("#registrationForm").validate({
    rules: {
        'userName': {
        required: true,
        minlength: 6,
        maxlength: 20,
        regex: "^[a-zA-Z0-9\s ]+$"
        },

        gender:{
           required: true
        },

        'dateOfBirth': {
        minAge: 18
        },

        'phoneNumber': {
         required: true,
         minlength: 10,
         maxlength: 10
        },

        'biography': {
        maxlength: 50
        }
    },

    messages: {
        userName: {
        required: "Please enter the Username",
        maxlength: "maxLength is 20 characters required",
        minlength: "minLength is 6 characters required"
        },

        gender: {
        required: "Select your gender"
        },

        dateOfBirth: {
        minAge: "Sorry, you must be 18 years of age to apply"
        },

        biography: {
        maxlength: "maxLength is 50 characters required"
        },

        phoneNumber: {
        required: "Phone number must be required",
        maxlength: "Must be 10 characters required"
        }
    },

    highlight: function (element) {
        $(element).closest('.control-group').removeClass('success').addClass('error');
    },

    submitHandler: function(form) {
		form.submit();
	}

});
});
</script>
</body>
</html>

<!--
errorPlacement: function(error, element) {
if(element.is(":radio"))
{
error.appendTo($('#genderError'));
}
},
-->
